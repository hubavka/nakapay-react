# NakaPay Node.js SDK

[![npm version](https://badge.fury.io/js/nakapay-sdk.svg)](https://badge.fury.io/js/nakapay-sdk) <!-- Placeholder badge -->

The official Node.js SDK for interacting with the [NakaPay API](https://api.nakapay.app). Easily integrate Bitcoin Lightning Network payments into your Node.js applications.

## Features

*   Create and manage Lightning payment requests.
*   Check the status of payments.
*   Retrieve payment history.
*   Register webhooks for real-time payment notifications.
*   Typed interfaces for robust development with TypeScript.
*   Simple error handling.

## Installation

Install the SDK using npm:

```bash
npm install nakapay-sdk
```

Or using yarn:

```bash
yarn add nakapay-sdk
```

## Getting Started

First, you'll need an API key from your NakaPay dashboard.

```typescript
import { NakaPay } from 'nakapay-sdk';

// Initialize the client with your API key
const nakaPay = new NakaPay('YOUR_API_KEY');

async function createPayment() {
  try {
    const paymentRequest = await nakaPay.createPaymentRequest({
      amount: 100, // Amount in satoshis
      description: 'Payment for Order #123',
      destinationWallet: 'your_business_nwc_connection_string_or_identifier', // Or however businesses are identified for payment routing
      metadata: { orderId: '123', customerId: '456' }
    });

    console.log('Payment Request Created:', paymentRequest);
    console.log(`Invoice: ${paymentRequest.invoice}`);
    console.log(`Pay this invoice or show QR code for: ${paymentRequest.invoice}`);

    // You can then poll for payment status or use webhooks
    // For example, to check status after a delay:
    setTimeout(async () => {
      const status = await nakaPay.getPaymentStatus(paymentRequest.id);
      console.log(`Payment ID ${paymentRequest.id} Status:`, status.status);
    }, 30000); // Check after 30 seconds

  } catch (error) {
    console.error('Error creating payment request:', error.message);
  }
}

createPayment();
```

## API

The SDK provides the following methods:

*   `new NakaPay(apiKey: string, options?: { baseUrl?: string })`: Constructor to initialize the client.
*   `createPaymentRequest(options: PaymentRequestOptions): Promise<PaymentRequest>`
*   `getPaymentRequest(id: string): Promise<PaymentRequest>`
*   `getPaymentStatus(id: string): Promise<PaymentStatus>`
*   `getPayments(businessId: string, options?: { limit?: number; offset?: number }): Promise<PaymentRequest[]>`
*   `registerWebhook(businessId: string, options: WebhookOptions): Promise<{ success: boolean; message: string }>`

Refer to the `index.ts` file or the main NakaPay API documentation for detailed information on request/response types.

## Contributing

Contributions are welcome! Please open an issue or submit a pull request to the [NakaPay SDK repository](https://github.com/hubavka/nakapay-sdk).

## License

[MIT](LICENSE) <!-- Assuming MIT license, a LICENSE file might be needed at the root or SDK level -->
